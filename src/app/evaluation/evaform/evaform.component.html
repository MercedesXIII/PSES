<!-- head data -->
<div *ngFor="let data of getEva" fxLayout="row" fxLayoutWrap="wrap" class="all">
    <div fxFlex.gt-sm="34" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">First Name</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.EmployeeFirstName}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="33" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Last Name</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.EmployeeLastName}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="33" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Group of Staff</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.GroupOfStaff}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="34" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Customer</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.CustomerCompanyAlias}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="33" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Project Code</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.ProjectCode}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="33" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Project Type</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.ProjectType}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="34" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Evalute Term</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.EvaTerm}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="33" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Proj.Duration</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.StartDatePlan+"-"+data.FinishDatePlan}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="33" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Role & Responsible</div>
        </div>
        <div class="detail" fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.Function}}</div>
        </div>
    </div>
    <div fxFlex.gt-sm="34" fxFlex.gt-xs="50" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex.gt-xs="50" fxFlex.gt-sm="50" fxFlex="100">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Filter By</div>
        </div>
        <div class="detail" fxFlex.gt-xs="50" fxFlex.gt-sm="50" fxFlex="100">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Filter By</div>
        </div>
    </div>
    <div fxFlex.gt-sm="66" fxFlex.gt-xs="100" fxFlex="100" fxLayout="row">
        <div class="header" fxFlex.gt-xs="25" fxFlex.gt-sm="25" fxFlex="100">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">Evaluator</div>
        </div>
        <div class="detail" fxFlex.gt-xs="75" fxFlex.gt-sm="75" fxFlex="100">
            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 5px">{{data.EvaluatorFirstName+" "+data.EvaluatorLastName}}</div>
        </div>
    </div>
</div>
<!-- end head data -->
<div fxLayout="row" fxLayoutWrap="wrap">
    <div fxFlex.gt-sm="27" fxFlex.gt-xs="30" fxFlex="100" fxLayout="row">
        <div fxFlex="100">
            <div fxLayoutWrap="wrap" fxLayout="row">
                <md-select class="ml-1 mr-1 mt-2" placeholder="Role" [(ngModel)]="currentPosition" style="width: 100%;">
                    <md-option *ngFor="let role of position" [value]="role.Part2ID">
                        {{ role.Function }}
                    </md-option>
                </md-select>
            </div>
        </div>
    </div>
    <div fxFlex.gt-sm="25" fxFlex.gt-xs="25" fxFlex="100" fxLayout="row">
        <div fxFlex="50">
            <div fxLayoutWrap="wrap" fxLayout="row">
                <button class="ml-1 mt-1" md-raised-button type="button" color="primary" type="button" (click)="onSubmit(currentPosition) ">OK</button>
            </div>
        </div>
        <div fxFlex="50" style="margin-top: 5%;">
            <div fxLayoutWrap="wrap" fxLayout="row">
                <button (click)="openDialogHead(0,currentPosition,1,-1)" md-icon-button [md-tooltip]="addtopic " [tooltip-position]="point ">
                    <md-icon>add</md-icon>
                </button>
            </div>
        </div>
    </div>
</div>
<md-card>
    <md-tab-group [(selectedIndex)]="activeTabIndex">
        <div *ngFor="let head of header; let k = index">
            <div *ngIf="head.H_Level==1">
                <md-tab>
                    <template md-tab-label>{{head.Alias}}</template>
                    <div fxLayout="row " fxLayoutAlign="start center" class="ml-2 mt-1">
                        <div fxLayout.gt-xs="row" fxLayout.gt-sm="column">
                            <div style="font-size: 19px; ">{{head.Text}}</div>
                            <!-- <div style="font-size: 19px; ">{{"("+head.Text_Eng+")"}}</div> -->
                        </div>
                        <div>
                            <input class="ml-1 mr-1" style="text-align: center; width: 60px; font-size: 19px;" disabled="disabled" [(ngModel)]="finalTotalScore[k]">
                            <button md-icon-button (click)="openDialogHead(head.H_ID,currentPosition,2,k)" [md-tooltip]="adddetail " [tooltip-position]="point ">
                                <md-icon>add</md-icon>
                            </button>
                            <button *ngIf="head.H_ID < 0" md-icon-button (click)=" delete(head.H_ID,k)" [md-tooltip]="remove " [tooltip-position]="point ">
                                <md-icon>delete_forever</md-icon>
                            </button>
                        </div>
                    </div>
                    <hr>
                    <div fxFlex="100" fxLayout="row" class="mt-1 mb-1">
                        <div fxFlex="70">
                            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 50%">
                                <b>Topic</b>
                            </div>
                        </div>
                        <div fxFlex="30">
                            <div fxLayoutWrap="wrap" fxLayout="row" style="margin-left: 40%">
                                <b>Score</b>
                            </div>
                        </div>
                    </div>
                    <hr>
                    <md-card-content>
                        <div *ngFor="let head2 of header; let i=index">
                            <div *ngIf=" head2.H_Level==2 && head2.Parent==head.H_ID">
                                <div fxFlex="100" fxLayout="row" fxLayoutAlign="start start">
                                    <div fxFlex="5">
                                        <div fxLayoutWrap="wrap " fxLayout="row " style="margin-top: -3px; ">
                                            <button *ngIf="flag[i]==false " (click)="callflag(i) " md-icon-button md-button-sm>
                                                <md-icon>add_circle_outline</md-icon>
                                            </button>
                                            <button *ngIf="flag[i]==true " (click)="callflag(i) " md-icon-button md-button-sm>
                                                <md-icon>remove_circle_outline</md-icon>
                                            </button>
                                        </div>
                                    </div>
                                    <div fxFlex="64 ">
                                        <div fxLayoutWrap="wrap " fxLayout="row " style="margin-left: 15px; ">
                                            {{head2.Text+"( "+head2.Text_Eng+") "}}
                                        </div>
                                    </div>
                                    <div fxFlex="30">
                                        <div fxLayout="row " fxLayoutWrap="wrap" style="margin-left: 40% " fxLayout.xs="column ">
                                            <div>
                                                <input class="mr-1 " style="width: 50px; text-align: center; " disabled="disabled " [(ngModel)]="subTotalScore[i] ">
                                            </div>
                                            <div style="margin-top: -3px; ">
                                                <button *ngIf="flag[i]==false && head2.H_ID < 0 " md-icon-button md-button-sm (click)="delete(head2.H_ID,i) " [md-tooltip]="remove " [tooltip-position]="point ">
                                                    <md-icon>delete_forever</md-icon>
                                                </button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="flag[i]==true ">
                                    <div *ngFor="let head3 of header; let j=index;">
                                        <div *ngIf=" head3.H_Level==3 && head3.Parent==head2.H_ID " fxFlex="100" fxLayout="row " fxLayoutAlign="start start " class="ml-1">
                                            <div fxFlex="5" style="margin-top: -2px; ">
                                                <md-icon>play_arrow</md-icon>
                                            </div>
                                            <div fxFlex="64">
                                                <div fxLayoutWrap="wrap " fxLayout="row " style="margin-left: 15px ">
                                                    {{head3.Text}}
                                                </div>
                                            </div>
                                            <div fxFlex="30">
                                                <div fxLayoutWrap="wrap " fxLayout="row " style="margin-left: 43% ">
                                                    <div>
                                                        <select class="mr-1 " [(ngModel)]="currentScore[j] " (ngModelChange)="call() " style="width: 50px; ">
                                                            <option [selected] [value]=0>
                                                                N/A
                                                            </option>
                                                            <option *ngFor=" let val of score " [value]="val ">
                                                                {{val}}
                                                            </option>
                                                        </select>
                                                    </div>
                                                    <div>
                                                        <button md-icon-button md-button-sm *ngIf="head3.H_ID < 0 " (click)=" delete(head3.H_ID,j) " [md-tooltip]="remove " [tooltip-position]="point " tabindex="-1 ">
                                                            <md-icon>delete_forever</md-icon>
                                                        </button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div fxLayout="row " fxLayoutAlign="start center " fxFlex="100 ">
                                        <div fxFlex="10 " class="ml-1">
                                            <button md-icon-button md-button-sm (click)="openDialogHead(head2.H_ID,currentPosition,3,i) ">
                                                <md-icon>add</md-icon>
                                            </button>
                                        </div>
                                    </div>
                                    <div>
                                        <md-textarea placeholder="Comment " class="ml-xs mr-xs " style="width: 90%; "></md-textarea>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div fxLayout="row " fxLayoutAlign="space-between end ">
                            <div>
                                <button *ngIf="activeTabIndex>= 1" md-icon-button class="ml-1" (click)="passScore(false)">
                                    <md-icon>arrow_back</md-icon>
                                </button>
                            </div>
                            <div style="margin-right: 10%;">
                                <div style="margin-left: 100%;">
                                    <button *ngIf="activeTabIndex < countHeader-1" md-icon-button class="ml-1" (click)="passScore(true)">
                                        <md-icon>arrow_forward</md-icon>
                                    </button>
                                </div>
                                <div *ngIf="countHead3full != 0">
                                    <button *ngIf="activeTabIndex == countHeader-1" md-raised-button color="accent" (click)="call()">
                                        Calculate
                                    </button>
                                    <button tyle="margin-top: -3px;" *ngIf="activeTabIndex == countHeader-1" md-raised-button [disabled]="countHead3!=countHead3full" color="primary" (click)="finishEvaluate()">
                                        Confirm
                                    </button>
                                </div>
                            </div>
                        </div>
                    </md-card-content>
                </md-tab>
            </div>
        </div>
    </md-tab-group>
</md-card>
<!-- Table -->
<!-- <md-card>
    <md-tab-group [(selectedIndex)]="activeTabIndex "> -->
<!-- add in tab -->
<!-- <md-tab>
            <template md-tab-label>
                <button (click)="openDialogHead(0,currentPosition,1,-1) " md-icon-button>
                    <md-icon>add</md-icon>
                </button>
            </template>
        </md-tab>
        <div *ngFor="let head of header; let k=i ndex ">
            <div *ngIf="head.H_Level==1 ">
                <md-tab>
                    <template md-tab-label>{{head.Text}}</template>
                    <md-card-content>
                        <div fxLayout="row " fxLayoutAlign="start center " class="ml-1 ">
                            <p style="font-size: 19px; ">{{head.Text+"( "+head.Text_Eng+") "}}</p>
                            <input class="ml-1 mr-1 " style="text-align: center; width: 60px; font-size: 19px; " disabled="disabled " [(ngModel)]="finalTotalScore[k] ">
                            <button md-icon-button (click)="openDialogHead(head.H_ID,currentPosition,2,k) " [md-tooltip]="adddetail " [tooltip-position]="point ">
                                <md-icon>add</md-icon>
                            </button>
                            <button *ngIf="head.H_ID < 0 " md-icon-button (click)=" delete(head.H_ID,k) " [md-tooltip]="remove " [tooltip-position]="point ">
                                <md-icon>delete_forever</md-icon>
                            </button>
                        </div>
                        <hr>
                        <div fxLayoutAlign="start center " fxFlex="100 " style="margin-top: 8px; margin-bottom: 8px; ">
                            <div fxFlex="70 " align="center " style="font-weight: bold; ">Topic</div>
                            <div fxFlex="15 "></div>
                            <div align="center " style="font-weight: bold; ">Score</div>
                        </div>
                        <hr>
                        <div *ngFor="let head2 of header; let i=index " fxLayoutWrap="wrap " fxLayout="row ">
                            <div fxLayoutWrap="wrap " fxLayout="row " *ngIf=" head2.H_Level==2 && head2.Parent==head.H_ID " fxFlex="100 ">
                                <div fxLayout="row " fxLayoutWrap="wrap " fxLayoutAlign="start center " fxFlex="100 ">
                                    <div fxFlex="3 "></div>
                                    <div fxFlex="5 " fxLayoutWrap="wrap " fxLayout="row ">
                                        <button *ngIf="flag[i]==false " (click)="callflag(i) " md-icon-button>
                                            <md-icon>add_circle_outline</md-icon>
                                        </button>
                                        <button *ngIf="flag[i]==true " (click)="callflag(i) " md-icon-button>
                                            <md-icon>remove_circle_outline</md-icon>
                                        </button>
                                    </div>
                                    <div fxFlex="76 " fxLayoutWrap="wrap " fxLayout="row ">{{head2.Text+"( "+head2.Text_Eng+") "}}</div>
                                    <div align="center ">
                                        <input class="mr-1 " style="width: 50px; text-align: center; " disabled="disabled " [(ngModel)]="subTotalScore[i] ">
                                        <button *ngIf="flag[i]==false && head2.H_ID < 0 " md-icon-button (click)="delete(head2.H_ID,i) " [md-tooltip]="remove " [tooltip-position]="point ">
                                            <md-icon>delete_forever</md-icon>
                                        </button>
                                    </div>
                                </div>
                                <div fxLayout="row " fxLayoutAlign="start center " fxFlex="100 " style="margin-left: 5% ">
                                    <div *ngIf="flag[i]==true " fxFlex="100 ">
                                        <div *ngFor="let head3 of header; let j=index; " fxLayout="row " fxFlex="100 ">
                                            <div *ngIf=" head3.H_Level==3 && head3.Parent==head2.H_ID " fxLayout="row " fxFlex="100 " style="margin-top: 10px; ">
                                                <div fxFlex="3 ">
                                                    <md-icon>play_arrow</md-icon>
                                                </div>
                                                <div fxFlex="80 ">{{head3.Text}}</div>
                                                <div>
                                                    <select class="mr-1 " [(ngModel)]="currentScore[j] " (ngModelChange)="call() " style="text-align: center; width: 55px; ">
                                                        <option [selected] [value]=0>
                                                            N/A
                                                        </option>
                                                        <option *ngFor=" let val of score " [value]="val ">
                                                            {{val}}
                                                        </option>
                                                    </select>
                                                    <button style="margin-top:-20px; " md-icon-button *ngIf="head3.H_ID < 0 " (click)=" delete(head3.H_ID,j) " [md-tooltip]="remove " [tooltip-position]="point " tabindex="-1 ">
                                                        <md-icon>delete_forever</md-icon>
                                                    </button>
                                                </div>
                                            </div>
                                        </div>
                                        <div fxLayout="row " fxLayoutAlign="start center " fxFlex="100 ">
                                            <div (click)="openDialogHead(head2.H_ID,currentPosition,3,i) " fxFlex="10 ">
                                                <button md-icon-button>
                                                    <md-icon>add</md-icon>
                                                </button>
                                            </div>
                                        </div>
                                        <div>
                                            <md-textarea placeholder="Comment " class="ml-xs mr-xs " style="width: 90%; "></md-textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div div fxLayout="row " fxLayoutAlign="space-between end ">
                            <div>
                                <button *ngIf="activeTabIndex>= 1" md-icon-button class="ml-1" (click)="passScore(false)">
                            <md-icon>arrow_back</md-icon>
                            </button>
                        </div>
                        <div style="margin-right: 10%;">
                            <div style="margin-left: 100%;">
                                <button *ngIf="activeTabIndex < countHeader-1" md-icon-button class="ml-1" (click)="passScore(true)">
                                    <md-icon>arrow_forward</md-icon>
                                </button>
                            </div>
                            <div *ngIf="countHead3full != 0">
                                <button *ngIf="activeTabIndex == countHeader-1" md-raised-button color="accent" (click)="call()">
                                    Calculate
                                </button>
                                <button *ngIf="activeTabIndex == countHeader-1" md-raised-button [disabled]="countHead3!=countHead3full" color="primary" (click)="finishEvaluate()">
                                    Confirm
                                </button>
                            </div>
                        </div>
            </div>
            </md-card-content>
            </md-tab>
        </div>
        </div>
    </md-tab-group>
</md-card> -->
