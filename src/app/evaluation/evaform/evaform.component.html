<!-- head data -->
<div>
    <md-grid-list *ngFor="let data of getEva" [cols]="fixedCols" [rowHeight]="fixedRowHeight" class="ml-1 mr-1">
        <md-grid-tile [colspan]="2" [rowspan]="1" [style.background]="color ">
            <div class="header">First Name</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="3" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.EmployeeFirstName}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="2" [rowspan]="1 " [style.background]="color ">
            <div class="header">Last Name</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="4" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.EmployeeLastName}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="3" [rowspan]="1 " [style.background]="color ">
            <div class="header">Group of Staff</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="4" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.GroupOfStaff}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="2" [rowspan]="1 " [style.background]="color ">
            <div class="header">Customer</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="3" [rowspan]="1 " [style.background]="color2">
            <div class="detail">{{data.CustomerCompanyAlias}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="2" [rowspan]="1 " [style.background]="color ">
            <div class="header">Project Code</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="4" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.ProjectCode}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="3" [rowspan]="1 " [style.background]="color ">
            <div class="header">Project Type</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="4" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.ProjectType}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="2" [rowspan]="1 " [style.background]="color ">
            <div class="header">Evalute Term</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="3" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.EvaTerm}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="2" [rowspan]="1 " [style.background]="color ">
            <div class="header">Proj.Duration</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="4" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.StartDatePlan+"-"+data.FinishDatePlan}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="3" [rowspan]="1 " [style.background]="color ">
            <div class="header">Role & Responsible</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="4" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.Function}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="2" [rowspan]="1 " [style.background]="color ">
            <div class="header">Evaluator</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="9" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">{{data.EvaluatorFirstName+" "+data.EvaluatorLastName}}</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="3" [rowspan]="1 " [style.background]="color ">
            <div class="header">Filter By</div>
        </md-grid-tile>
        <md-grid-tile [colspan]="4" [rowspan]="1 " [style.background]="color2 ">
            <div class="detail">Mercedes</div>
        </md-grid-tile>
    </md-grid-list>
    <!-- end head data -->
    <div fxLayout="row" fxLayoutAlign="start center" class="mb-1">
        <md-select class="ml-1 mt-1" placeholder="Period" [(ngModel)]="currentPosition" style="width: 23%;">
            <md-option *ngFor="let role of position" [value]="role.Part2ID">
                {{ role.Function }}
            </md-option>
        </md-select>
        <button md-raised-button type="button" color="primary" type="button" class="mt-1 ml-1 mb-1" (click)="onSubmit(currentPosition) ">OK</button>
        <button *ngIf="flagCreate==false" (click)="callflagHead1()" md-icon-button>
            <md-icon>add</md-icon>
        </button>
    </div>
    <div *ngIf="flagCreate==true" class="mt-1" fxLayout="row" fxLayoutAlign="start center" fxFlex="90">
        <form style="width: 90%;" [formGroup]="form1" (ngSubmit)="insertHeader1(0,currentPosition,TextThai1,TextEng1,TextAlias1)">
            <div class="mb-1">
                <md-input placeholder="TextThai" [formControl]="form1.controls['TextThai1']" style="width: 100%" #TextThai1></md-input>
                <small *ngIf="form1.controls['TextThai1'].hasError('required') && form1.controls['TextThai1'].touched" class="md-text-warn">You must include a TextThai.</small>
            </div>
            <div class="mb-1">
                <md-input placeholder="TextEng" [formControl]="form1.controls['TextEng1']" style="width: 100%" #TextEng1></md-input>
                <small *ngIf="form1.controls['TextEng1'].hasError('required') && form1.controls['TextEng1'].touched" class="md-text-warn">You must include a TextEng.</small>
            </div>
            <div class="mb-1">
                <md-input placeholder="TextAlias" [maxlength]="1" [formControl]="form1.controls['TextAlias1']" style="width: 100%" #TextAlias1></md-input>
                <small *ngIf="form1.controls['TextAlias1'].hasError('required') && form1.controls['TextAlias1'].touched" class="md-text-warn">You must include a TextAlias.</small>
            </div>
            <md-card-actions>
                <button md-raised-button color="primary" type="submit" [disabled]="!form1.valid">Submit</button>
                <button md-raised-button color="accent" type="button" (click)="callflagHead1()">Cancel</button>
            </md-card-actions>
        </form>
    </div>
</div>
<!-- Table -->
<md-card>
    <md-tab-group [(selectedIndex)]="activeTabIndex">
        <div *ngFor="let head of header; let k = index">
            <div *ngIf="head.H_Level==1">
                <md-tab>
                    <template md-tab-label>{{head.Alias}}</template>
                    <md-card-content>
                        <div fxLayout="row " fxLayoutAlign="start center" class="ml-1">
                            <p style="font-size: 19px;">{{head.Text+"("+head.Text_Eng+")"}}</p>
                            <input class="ml-1" style="text-align: center; width: 60px; font-size: 19px;" disabled="disabled" value="N/A">
                            <button md-icon-button *ngIf="flagAdd[k]==false" (click)="callflagAdd(k)">
                                <md-icon>add</md-icon>
                            </button>
                        </div>
                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="100">
                            <div fxFlex="10"></div>
                            <div *ngIf="flagAdd[k]==true" class="mt-1" fxLayout="row" fxLayoutAlign="start center" fxFlex="90">
                                <form style="width: 90%;" [formGroup]="form2" (ngSubmit)="insertHeader2(k,head.H_ID,head.PositionNO,head.Eva_ID,TextThai2,TextEng2)">
                                    <div class="mb-1">
                                        <md-input placeholder="TextThai" [formControl]="form2.controls['TextThai2']" style="width: 100%" #TextThai2></md-input>
                                        <small *ngIf="form2.controls['TextThai2'].hasError('required') && form2.controls['TextThai2'].touched" class="md-text-warn">You must include a TextThai.</small>
                                    </div>
                                    <div class="mb-1">
                                        <md-input placeholder="TextEng" [formControl]="form2.controls['TextEng2']" style="width: 100%" #TextEng2></md-input>
                                        <small *ngIf="form2.controls['TextEng2'].hasError('required') && form2.controls['TextEng2'].touched" class="md-text-warn">You must include a TextEng.</small>
                                    </div>
                                    <md-card-actions>
                                        <button md-raised-button color="primary" type="submit" [disabled]="!form2.valid">Submit</button>
                                        <button md-raised-button color="accent" type="button" (click)="callflagAdd(k)">Cancel</button>
                                    </md-card-actions>
                                </form>
                            </div>
                        </div>
                        <hr>
                        <div fxLayoutAlign="start center" fxFlex="100" style="margin-top: 8px; margin-bottom: 8px;">
                            <div fxFlex="70" align="center" style="font-weight: bold;">Topic</div>
                            <div fxFlex="15"></div>
                            <div align="center" style="font-weight: bold;">Score</div>
                        </div>
                        <hr>
                        <div *ngFor="let head2 of header; let i=index ">
                            <div *ngIf=" head2.H_Level==2 && head2.Parent==head.H_ID " fxFlex="100">
                                <div fxLayout="row " fxLayoutAlign="start center " fxFlex="100">
                                    <div fxFlex="3"></div>
                                    <div fxFlex="5">
                                        <button *ngIf="flag[i]==false" (click)="callflag(i)" md-icon-button>
                                            <md-icon>add_circle_outline</md-icon>
                                        </button>
                                        <button *ngIf="flag[i]==true" (click)="callflag(i)" md-icon-button>
                                            <md-icon>remove_circle_outline</md-icon>
                                        </button>
                                    </div>
                                    <div fxFlex="76">{{head2.Text+"("+head2.Text_Eng+")"}}</div>
                                    <div align="center">
                                        <input style="width: 50px; text-align: center;" disabled="disabled" [(ngModel)]="subTotalScore[i]">
                                    </div>
                                </div>
                                <div fxLayout="row" fxLayoutAlign="start center " fxFlex="100" style="margin-left: 5%">
                                    <div *ngIf="flag[i]==true" fxFlex="100">
                                        <div *ngFor="let head3 of header; let j=index;" fxLayout="row" fxFlex="100">
                                            <div *ngIf=" head3.H_Level==3 && head3.Parent==head2.H_ID " fxLayout="row " fxFlex="100" style="margin-top: 10px;">
                                                <div fxFlex="3">
                                                    <b>>></b>
                                                </div>
                                                <div fxFlex="80">{{head3.Text}}</div>
                                                <div>
                                                    <select [(ngModel)]="currentScore[j]" style="text-align: center; width: 55px;">
                                                        <option [selected] [value]=0>
                                                            N/A
                                                        </option>
                                                        <option *ngFor=" let val of score " [value]="val">
                                                            {{val}}
                                                        </option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                        <div fxLayout="row" fxLayoutAlign="start center" fxFlex="100">
                                            <div *ngIf="flagAdd[i]==false" (click)="callflagAdd(i)" fxFlex="10">
                                                <button md-icon-button>
                                                    <md-icon>add</md-icon>
                                                </button>
                                            </div>
                                            <div *ngIf="flagAdd[i]==true" class="mt-1" fxLayout="row" fxLayoutAlign="start center" fxFlex="90">
                                                <form style="width: 90%;" [formGroup]="form3" (ngSubmit)="insertHeader3(i,head2.H_ID,head2.PositionNO,head2.Eva_ID,TextThai3)">
                                                    <div class="mb-1">
                                                        <md-input placeholder="TextThai" [formControl]="form3.controls['TextThai3']" style="width: 100%" #TextThai3></md-input>
                                                        <small *ngIf="form3.controls['TextThai3'].hasError('required') && form3.controls        ['TextThai3'].touched" class="md-text-warn">You must include a TextThai.</small>
                                                    </div>
                                                    <md-card-actions>
                                                        <button md-raised-button color="primary" type="submit" [disabled]="!form3.valid">Submit</button>
                                                        <button md-raised-button color="accent" type="button" (click)="callflagAdd(i)">Cancel</button>
                                                    </md-card-actions>
                                                </form>
                                            </div>
                                        </div>
                                        <div>
                                            <md-textarea placeholder="Comment " class="ml-xs mr-xs " style="width: 90%; "></md-textarea>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div div fxLayout="row " fxLayoutAlign="space-between end ">
                            <div>
                                <button *ngIf="activeTabIndex>= 1" md-icon-button class="ml-1" (click)="passScore(false)">
                                    <md-icon>arrow_back</md-icon>
                                </button>
                            </div>
                            <button (click)=call()>ewqeq</button>
                            <div style="margin-right: 10%;">
                                <div style="margin-left: 100%;">
                                    <button *ngIf="activeTabIndex < countHeader-1" md-icon-button class="ml-1" (click)="passScore(true)">
                                        <md-icon>arrow_forward</md-icon>
                                    </button>
                                </div>
                                <div>
                                    <button *ngIf="activeTabIndex == countHeader-1" md-raised-button [disabled]="countHead3!=countHead3full" color="primary" (click)="finishEvaluate()">
                                        Confirm
                                    </button>
                                </div>
                            </div>
                        </div>
                    </md-card-content>
                </md-tab>
            </div>
        </div>
    </md-tab-group>
</md-card>
<!-- <ngx-datatable class="material mt-1 " [columnMode]=" 'flex' " [headerHeight]="50 " [footerHeight]="50 " [rowHeight]="30 " [scrollbarV]="false " [scrollbarH]="true " [rows]="header ">
    <ngx-datatable-column name="Alias " [flexGrow]="2 " prop="H_Level ">
        <template ngx-datatable-header-template>
            <div style="text-align: center; font-weight: bold ">Level</div>
        </template>
        <template ngx-datatable-cell-template let-row="row " let-value="value ">
            <div style="text-align: center; ">
                {{value}}
            </div>
        </template>
    </ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="1 ">
        <template ngx-datatable-header-template>
            <div style="text-align: center; font-weight: bold ">No</div>
        </template>
        <template ngx-datatable-cell-template let-row="row " let-value="value ">
            <div style="text-align: center; ">
                {{row.$$index+1}}
            </div>
        </template>
    </ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="6 " prop="Text ">
        <template ngx-datatable-header-template>
            <div style="text-align: center; font-weight: bold; ">Text</div>
        </template>
        <template ngx-datatable-cell-template let-row="row " let-value="value ">
            <div style="text-align: left; ">
                {{value}}
            </div>
        </template>
    </ngx-datatable-column>
    <ngx-datatable-column [flexGrow]="6 " prop="Text_Eng ">
        <template ngx-datatable-header-template>
            <div style="text-align: center; font-weight: bold ">Text_Eng</div>
        </template>
        <template ngx-datatable-cell-template let-row="row " let-value="value ">
            <div style="text-align: left; ">
                {{value}}
            </div>
        </template>
    </ngx-datatable-column>
    <ngx-datatable-column name="Alias " [flexGrow]="2 " prop="Alias ">
        <template ngx-datatable-header-template>
            <div style="text-align: center; font-weight: bold ">Alias</div>
        </template>
        <template ngx-datatable-cell-template let-row="row " let-value="value ">
            <div style="text-align: center; ">
                {{value}}
            </div>
        </template>
    </ngx-datatable-column>
</ngx-datatable> -->
