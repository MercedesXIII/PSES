<!-- Data Table #Start-->
<div fxLayout="row" fxLayoutAlign="space-between center">
    <div fxLayout="row" fxLayoutAlign="start center">
        <button md-icon-button (click)="backpage() ">
            <md-icon>arrow_back</md-icon>
        </button>
        <button class="mr-1" md-raised-button md-button-sm color="primary" type="submit" (click)=onSubmit()>{{'Submit' | translate}}</button>
        <span><b>{{period}}</b></span>
    </div>
    <div>
        <button md-icon-button (click)="openDialogHead()">
        <md-icon>add</md-icon>
    </button>
    </div>
</div>
<div fxLayout="column" fxLayoutAlign="start stretch" fxFlex.xs="100" fxHide="false" fxHide.xs>
    <ngx-datatable class="material " [columnMode]=" 'force' " [headerHeight]="50 " [footerHeight]="50 " [rowHeight]="43" [scrollbarV]="false "
        [scrollbarH]="true" [rows]="listeva" [limit]="10 " [selected]="selected" [selectionType]="'checkbox'" (select)='onSelect($event)'>
        <ngx-datatable-column [width]="48" [minWidth]="48" [checkboxable]="true">
            <template ngx-datatable-header-template>
                <div style="margin-left:-6px; font-weight: bold ">
                    <button *ngIf="chb == true" style="font-size: 10px; background: white;color: white;" (click)="all(true)">
                        ✔
                    </button>
                    <button *ngIf="chb == false" style="font-size: 10px; background: white; color: #009688;" (click)="all(false)">
                        ✔
                    </button>
                </div>
            </template>
        </ngx-datatable-column>
        <!--<ngx-datatable-column [flexGrow]="1">
            <template ngx-datatable-header-template>
                <div style="text-align: center; font-weight: bold ">#</div>
            </template>
            <template ngx-datatable-cell-template let-row="row" let-value="value">
                <div style="text-align: center; ">
                    {{row.$$index+1}}
                </div>
            </template>
        </ngx-datatable-column>-->
        <ngx-datatable-column [width]="207" [minWidth]="207" prop="EmployeeFirstName">
            <template ngx-datatable-header-template>
                <div style="text-align: center; font-weight: bold; ">{{'Name' | translate}}</div>
            </template>
            <template ngx-datatable-cell-template let-row="row " let-value="value">
                <div style="text-align: left; ">
                    {{value+" "+row.EmployeeLastName}}
                </div>
            </template>
        </ngx-datatable-column>
        <ngx-datatable-column [width]="115" [minWidth]="115" prop="ProjectCode">
            <template ngx-datatable-header-template>
                <div style="text-align: center; font-weight: bold; ">{{'Project Code' | translate}}</div>
            </template>
            <template ngx-datatable-cell-template let-row="row" let-value="value">
                <div style="text-align: center; ">
                    {{value}}
                </div>
            </template>
        </ngx-datatable-column>
        <ngx-datatable-column [width]="196" [minWidth]="196" prop="Role">
            <template ngx-datatable-header-template>
                <div style="text-align: center; font-weight: bold; ">{{'Role' | translate}}</div>
            </template>
            <template ngx-datatable-cell-template let-row="row " let-value="value ">
                <div style="text-align: left; ">
                    {{value}}
                </div>
            </template>
        </ngx-datatable-column>
        <ngx-datatable-column [width]="150" [minWidth]="150" prop="PlanStartDate">
            <template ngx-datatable-header-template>
                <div style="text-align: center; font-weight: bold; ">{{'Start Date' | translate}}</div>
            </template>
            <template ngx-datatable-cell-template let-row="row" let-value="value">
                <div style="text-align: center; ">
                    <md-input type="date" style="width: 100%" [(ngModel)]="startDate[row.$$index]" min="{{listeva[row.$$index]['PlanStartDate']}}"
                        max="{{finishDate[row.$$index]}}"></md-input>
                </div>
            </template>
        </ngx-datatable-column>
        <ngx-datatable-column [width]="150" [minWidth]="150" prop="PlanFinishDate">
            <template ngx-datatable-header-template>
                <div style="text-align: center; font-weight: bold; ">{{'Finish Date' | translate}}</div>
            </template>
            <template ngx-datatable-cell-template let-row="row" let-value="value">
                <div>
                    <md-input style="text-align: center;" type="date" style="width: 100%" [(ngModel)]="finishDate[row.$$index]" min="{{startDate[row.$$index]}}"
                        max="{{listeva[row.$$index]['PlanFinishDate']}}"></md-input>
                </div>
            </template>
        </ngx-datatable-column>
    </ngx-datatable>
</div>
<div fxLayout="column" fxLayoutAlign="start stretch" fxFlex.xs="100" fxShow="false" fxShow.xs>
    <ngx-datatable class='material' [columnMode]="'force'" [headerHeight]="50" [footerHeight]="70" [rowHeight]="'auto'" [scrollbarH]="true"
        [limit]="4" [rows]='listeva' [selected]="selected" [selectionType]="'checkbox'" (select)='onSelect($event)'>
        <ngx-datatable-column [width]="25" [minWidth]="25" [checkboxable]="true">
            <template ngx-datatable-header-template>
                <div style="margin-left:-6px; font-weight: bold ">
                    <button *ngIf="chb == true" style="font-size: 7px; background: white;color: white;" (click)="all(true)">
                        ✔
                    </button>
                    <button *ngIf="chb == false" style="font-size: 7px; background: white; color: #009688;" (click)="all(false)">
                        ✔
                    </button>
                </div>
            </template>
        </ngx-datatable-column>
        <ngx-datatable-column [width]="255" [minWidth]="255">
            <template ngx-datatable-header-template>
                <div style="text-align: center; font-weight: bold; ">Detail</div>
            </template>
            <template ngx-datatable-cell-template let-row="row" let-value="value">
                <div fxLayout="column" fxLayoutAlign="start">
                    <span><b>{{'Name' | translate}}</b> {{listeva[row.$$index]['EmployeeFirstName']+" "+listeva[row.$$index]['EmployeeLastName']}}</span>
                    <span><b>{{'Project Code' | translate}}</b> {{listeva[row.$$index]['ProjectCode']}}</span>
                    <span><b>{{'Role' | translate}}</b> {{listeva[row.$$index]['Role']}}</span>
                    <span style="margin-top: -18px;"><b>{{'StartDate' | translate}}</b> <md-input type="date" [(ngModel)]="startDate[row.$$index]" min="{{listeva[row.$$index]['PlanStartDate']}}" max="{{finishDate[row.$$index]}}"></md-input></span>
                    <span style="margin-top: -25px;"><b>{{'FinishDate' | translate}}</b> <md-input type="date" [(ngModel)]="finishDate[row.$$index]" min="{{startDate[row.$$index]}}" max="{{listeva[row.$$index]['PlanFinishDate']}}"></md-input></span>
                </div>
            </template>
        </ngx-datatable-column>
    </ngx-datatable>
</div>